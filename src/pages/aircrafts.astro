---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <main>
    <h2>Performances des avions</h2>
    
    <div id="plot"></div>
  </main>

  <script>
    import * as Plot from "@observablehq/plot";
    import aircrafts from "../assets/aircrafts.json";

    const plotDiv = document.getElementById("plot");

    const plot = Plot.plot({
      marks: [
        Plot.dot(aircrafts, {
          x: "range_km",
          y: "max_speed_kmh",
          stroke: "type",
          fill: "type",
          r: d => Math.sqrt(d.capacity) * 0.8,
          tooltip: d => `${d.model} – ${d.type}\nVitesse: ${d.max_speed_kmh} km/h\nAutonomie: ${d.range_km} km\nCapacité: ${d.capacity}`
        })
      ],
      x: { label: "Autonomie (km)" },
      y: { label: "Vitesse maximale (km/h)" },
      width: 700,
      height: 400,
      marginLeft: 60,
      marginBottom: 50
    });

    plotDiv.appendChild(plot);
  </script>
</Layout>
